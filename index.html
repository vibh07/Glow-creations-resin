<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
    <title>Glow Creations - Access</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&amp;family=Playfair+Display:wght@500;600;700&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet" />
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: { 
                        "primary": "#8BC34A", 
                        "primary-dark": "#689F38",
                        "deep-bg": "#000000", /* True Black for OLED */
                        "glass-border": "rgba(255, 255, 255, 0.08)",
                        "glass-surface": "rgba(255, 255, 255, 0.03)"
                    },
                    fontFamily: { 
                        "sans": ["Manrope", "sans-serif"], 
                        "serif": ["Playfair Display", "serif"] 
                    },
                    boxShadow: {
                        'glow': '0 0 25px rgba(139, 195, 74, 0.15)',
                        'input-focus': '0 0 0 2px rgba(139, 195, 74, 0.3)'
                    }
                },
            },
        }
    </script>
    <style>
        body {
            background-color: #000;
            background-image: radial-gradient(at 0% 0%, rgba(139, 195, 74, 0.15) 0px, transparent 50%),
                              radial-gradient(at 100% 100%, rgba(212, 175, 55, 0.1) 0px, transparent 50%);
            background-attachment: fixed;
        }

        /* --- MODERN INPUTS --- */
        .modern-input-group {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            transition: all 0.3s ease;
        }
        
        .modern-input-group:focus-within {
            border-color: #8BC34A;
            background: rgba(255, 255, 255, 0.07);
            box-shadow: 0 0 15px rgba(139, 195, 74, 0.1);
        }

        .modern-input {
            width: 100%;
            background-color: transparent !important;
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
            color: white;
            padding-top: 24px;
            padding-bottom: 8px;
            padding-left: 16px;
            padding-right: 16px;
            font-size: 16px;
            font-weight: 500;
            border-radius: 16px;
            height: auto;
        }

        /* AUTOFILL FIX */
        input:-webkit-autofill,
        input:-webkit-autofill:hover, 
        input:-webkit-autofill:focus, 
        input:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 30px #1a1a1a inset !important;
            -webkit-text-fill-color: white !important;
            transition: background-color 5000s ease-in-out 0s;
            border-radius: 12px;
        }

        .modern-label {
            position: absolute;
            left: 16px;
            top: 16px;
            color: #9ca3af;
            font-size: 14px;
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .modern-input:focus ~ .modern-label,
        .modern-input:not(:placeholder-shown) ~ .modern-label {
            top: 8px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #8BC34A;
            font-weight: 700;
        }

        /* --- Social Buttons --- */
        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            padding: 14px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s;
        }
        .social-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }
        .social-btn:active { transform: scale(0.98); }

        /* Loader */
        .loader {
            border: 2px solid rgba(0,0,0,0.1);
            border-top: 2px solid #000;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Smooth View Switching */
        .view-section {
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .view-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="text-white font-sans min-h-screen flex items-center justify-center relative overflow-hidden selection:bg-primary selection:text-black">

    <div class="w-full h-full flex flex-col lg:flex-row lg:h-screen">
        
        <!-- DESKTOP LEFT SIDE (Visual) -->
        <div class="hidden lg:block lg:w-1/2 h-full relative overflow-hidden">
            <div class="absolute inset-0 bg-black/30 z-10"></div>
            <img src="https://images.unsplash.com/photo-1615655406736-b37c4fabf923?auto=format&fit=crop&q=80&w=2400" 
                 class="w-full h-full object-cover scale-105" alt="Resin Art">
            <div class="absolute bottom-16 left-16 z-20">
                <h1 class="text-6xl font-serif font-bold leading-tight drop-shadow-lg">Glow <br> <span class="text-primary">Creations.</span></h1>
            </div>
        </div>

        <!-- RIGHT SIDE (Form) -->
        <div class="w-full lg:w-1/2 flex items-center justify-center relative z-20 px-4 py-8 h-screen lg:h-auto overflow-y-auto">
            
            <!-- Skip Button -->
            <button onclick="window.location.href='home.html'" class="absolute top-6 right-6 lg:top-10 lg:right-10 flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 hover:bg-white/10 transition-all text-xs font-bold uppercase tracking-widest text-gray-300 hover:text-white z-50">
                Skip for now <span class="material-symbols-outlined text-sm">arrow_forward</span>
            </button>

            <!-- Main Card Container -->
            <div class="w-full max-w-[420px] relative">
                
                <!-- Logo -->
                <div class="flex flex-col items-center mb-8">
                    <div class="w-16 h-16 rounded-3xl bg-gradient-to-br from-primary to-primary-dark flex items-center justify-center text-black font-serif font-bold text-3xl shadow-glow mb-6">G</div>
                </div>

                <!-- 1. LOGIN FORM -->
                <div id="login-view" class="view-section active">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-serif text-white">Welcome Back</h2>
                        <p class="text-gray-400 text-sm mt-1">Sign in to continue your journey.</p>
                    </div>

                    <form id="login-form" class="space-y-4">
                        <div class="modern-input-group">
                            <input type="email" id="login-email" class="modern-input" placeholder=" " required>
                            <label class="modern-label">Email Address</label>
                        </div>

                        <div class="modern-input-group">
                            <input type="password" id="login-password" class="modern-input" placeholder=" " required>
                            <label class="modern-label">Password</label>
                        </div>
                        
                        <div class="flex justify-end">
                            <button type="button" onclick="switchScreen('forgot')" class="text-xs font-bold text-gray-500 hover:text-primary transition-colors">Forgot Password?</button>
                        </div>

                        <button type="submit" id="login-btn" class="w-full py-4 bg-primary hover:bg-primary-dark text-black rounded-2xl font-bold text-base shadow-glow transition-transform active:scale-95 flex items-center justify-center gap-2 mt-2">
                            Sign In
                        </button>
                    </form>

                    <!-- Google Login (Full Width) -->
                    <div class="mt-8">
                        <div class="relative flex py-2 items-center">
                            <div class="flex-grow border-t border-white/10"></div>
                            <span class="flex-shrink-0 mx-4 text-gray-500 text-xs uppercase font-bold">Or continue with</span>
                            <div class="flex-grow border-t border-white/10"></div>
                        </div>

                        <div class="mt-4">
                            <button id="google-btn-login" class="social-btn group w-full">
                                <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5 group-hover:scale-110 transition-transform">
                                Continue with Google
                            </button>
                        </div>
                    </div>

                    <div class="mt-8 text-center">
                        <p class="text-sm text-gray-500">Not a member yet?</p>
                        <button onclick="switchScreen('signup')" class="text-white text-sm font-bold hover:text-primary mt-1 transition-colors">Create Account</button>
                    </div>
                </div>

                <!-- 2. SIGN UP FORM -->
                <div id="signup-view" class="view-section">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-serif text-white">Create Account</h2>
                        <p class="text-gray-400 text-sm mt-1">Join the Glow community.</p>
                    </div>

                    <form id="signup-form" class="space-y-4">
                        <div class="modern-input-group">
                            <input type="email" id="signup-email" class="modern-input" placeholder=" " required>
                            <label class="modern-label">Email Address</label>
                        </div>

                        <div class="modern-input-group">
                            <input type="tel" id="signup-phone" class="modern-input" placeholder=" " required>
                            <label class="modern-label">Phone Number</label>
                        </div>

                        <div class="modern-input-group">
                            <input type="password" id="signup-password" class="modern-input" placeholder=" " required>
                            <label class="modern-label">Create Password</label>
                        </div>

                        <button type="submit" id="signup-btn" class="w-full py-4 bg-white hover:bg-gray-200 text-black rounded-2xl font-bold text-base shadow-lg transition-transform active:scale-95 flex items-center justify-center gap-2 mt-4">
                            Create Account
                        </button>
                    </form>

                    <!-- Google Login (Signup) -->
                    <div class="mt-8">
                        <div class="relative flex py-2 items-center">
                            <div class="flex-grow border-t border-white/10"></div>
                            <span class="flex-shrink-0 mx-4 text-gray-500 text-xs uppercase font-bold">Or sign up with</span>
                            <div class="flex-grow border-t border-white/10"></div>
                        </div>

                        <div class="mt-4">
                            <button id="google-btn-signup" class="social-btn group w-full">
                                <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5 group-hover:scale-110 transition-transform">
                                Continue with Google
                            </button>
                        </div>
                    </div>

                    <div class="mt-8 text-center">
                        <p class="text-sm text-gray-500">Already a member?</p>
                        <button onclick="switchScreen('login')" class="text-white text-sm font-bold hover:text-primary mt-1 transition-colors">Sign In</button>
                    </div>
                </div>

                <!-- 3. FORGOT PASS FORM -->
                <div id="forgot-view" class="view-section">
                    <button onclick="switchScreen('login')" class="flex items-center gap-2 text-gray-400 hover:text-white mb-8 transition-colors">
                        <span class="material-symbols-outlined text-sm">arrow_back</span>
                        <span class="text-xs font-bold uppercase tracking-widest">Back</span>
                    </button>

                    <div class="text-center mb-8">
                        <div class="w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center text-primary mx-auto mb-4">
                            <span class="material-symbols-outlined text-2xl">key</span>
                        </div>
                        <h2 class="text-2xl font-serif text-white">Reset Password</h2>
                        <p class="text-gray-400 text-sm mt-2">Enter your email for a recovery link.</p>
                    </div>

                    <form id="forgot-form" class="space-y-6">
                        <div class="modern-input-group">
                            <input type="email" id="forgot-email" class="modern-input" placeholder=" " required>
                            <label class="modern-label">Registered Email</label>
                        </div>

                        <button type="submit" id="forgot-btn" class="w-full py-4 bg-primary hover:bg-primary-dark text-black rounded-2xl font-bold text-base transition-transform active:scale-95 flex items-center justify-center gap-2">
                            Send Link
                        </button>
                    </form>
                </div>

            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-6 left-1/2 -translate-x-1/2 z-[60] flex items-center gap-3 px-6 py-4 bg-[#1a1a1a] border border-white/10 text-white rounded-full shadow-2xl transition-all duration-500 opacity-0 -translate-y-10 pointer-events-none">
        <span id="toast-icon" class="material-symbols-outlined text-primary text-xl">check_circle</span>
        <span id="toast-msg" class="text-sm font-bold tracking-wide">Success</span>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { 
            getAuth, 
            createUserWithEmailAndPassword, 
            signInWithEmailAndPassword, 
            sendPasswordResetEmail, 
            onAuthStateChanged,
            GoogleAuthProvider,
            signInWithPopup 
        } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDUB2MY4FyAai9FgZ-6EZP9K9nmsUk5mb4",
            authDomain: "glow-creation.firebaseapp.com",
            projectId: "glow-creation",
            storageBucket: "glow-creation.firebasestorage.app",
            messagingSenderId: "236856410532",
            appId: "1:236856410532:web:2253fb7f215f7a232f8131",
            measurementId: "G-34FVP1W4E1"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const googleProvider = new GoogleAuthProvider();

        // --- UI HELPERS ---
        window.switchScreen = (screenName) => {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            setTimeout(() => {
                document.getElementById(`${screenName}-view`).classList.add('active');
            }, 100);
        };

        const showToast = (msg, type = 'success') => {
            const toast = document.getElementById('toast');
            const icon = document.getElementById('toast-icon');
            const txt = document.getElementById('toast-msg');

            txt.innerText = msg;
            icon.innerText = type === 'success' ? 'check_circle' : 'error';
            icon.style.color = type === 'success' ? '#8BC34A' : '#ef4444';
            
            toast.classList.remove('opacity-0', '-translate-y-10');
            setTimeout(() => toast.classList.add('opacity-0', '-translate-y-10'), 3000);
        };

        const setLoading = (btnId, isLoading, defaultText) => {
            const btn = document.getElementById(btnId);
            if(isLoading) {
                btn.innerHTML = `<div class="loader"></div>`;
                btn.disabled = true;
                btn.classList.add('opacity-70');
            } else {
                btn.innerHTML = defaultText;
                btn.disabled = false;
                btn.classList.remove('opacity-70');
            }
        };

        // --- AUTH FUNCTIONS ---

        // 1. SIGN UP
        document.getElementById('signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('signup-email').value;
            const pass = document.getElementById('signup-password').value;
            const phone = document.getElementById('signup-phone').value;

            if(phone.length < 10) { showToast("Invalid Phone", "error"); return; }
            setLoading('signup-btn', true);

            try {
                await createUserWithEmailAndPassword(auth, email, pass);
                localStorage.setItem('glowUserPhone', phone);
                showToast("Account Created");
                setTimeout(() => window.location.href = "home.html", 1500);
            } catch (err) {
                let msg = err.message;
                if(err.code === 'auth/email-already-in-use') msg = "Email already in use";
                if(err.code === 'auth/weak-password') msg = "Password too weak";
                showToast(msg, "error");
                setLoading('signup-btn', false, "Create Account");
            }
        });

        // 2. LOGIN
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-password').value;
            setLoading('login-btn', true);

            try {
                await signInWithEmailAndPassword(auth, email, pass);
                showToast("Welcome Back");
                setTimeout(() => window.location.href = "home.html", 1000);
            } catch (err) {
                showToast("Invalid Credentials", "error");
                setLoading('login-btn', false, "Sign In");
            }
        });

        // 3. GOOGLE LOGIN HANDLER
        const handleGoogleLogin = async () => {
            try {
                const result = await signInWithPopup(auth, googleProvider);
                showToast(`Welcome ${result.user.displayName || 'Back'}!`);
                setTimeout(() => window.location.href = "home.html", 1000);
            } catch (error) {
                console.error(error);
                let msg = "Login Failed";
                if (error.code === 'auth/popup-closed-by-user') msg = "Cancelled";
                if (error.code === 'auth/operation-not-allowed') msg = "Enable Google in Console";
                showToast(msg, "error");
            }
        };

        document.getElementById('google-btn-login').onclick = handleGoogleLogin;
        document.getElementById('google-btn-signup').onclick = handleGoogleLogin;

        // 4. FORGOT PASSWORD
        document.getElementById('forgot-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('forgot-email').value;
            setLoading('forgot-btn', true);

            try {
                await sendPasswordResetEmail(auth, email);
                showToast("Reset Link Sent");
                setTimeout(() => {
                    switchScreen('login');
                    setLoading('forgot-btn', false, "Send Link");
                }, 3000);
            } catch (err) {
                showToast(err.message, "error");
                setLoading('forgot-btn', false, "Send Link");
            }
        });

    </script>
</body>
</html>
